(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[346],{3280:function(e,t,s){Promise.resolve().then(s.bind(s,6944))},6944:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return n}});var a=s(7437),l=s(2265),r=s(605);function n(){var e,t,s;let{data:n,update:o}=(0,r.useSession)(),[d,i]=(0,l.useState)((null==n?void 0:null===(e=n.user)||void 0===e?void 0:e.username)||""),[c,u]=(0,l.useState)((null==n?void 0:null===(t=n.user)||void 0===t?void 0:t.email)||""),[x,m]=(0,l.useState)(""),[h,b]=(0,l.useState)(""),[g,f]=(0,l.useState)(""),[p,w]=(0,l.useState)(""),[y,j]=(0,l.useState)(!1),[N,v]=(0,l.useState)(null),[k,C]=(0,l.useState)(!1),[S,P]=(0,l.useState)(null),[F,U]=(0,l.useState)([]),[T,_]=(0,l.useState)(!1),[D,E]=(0,l.useState)(null),[R,I]=(0,l.useState)(0),[O,L]=(0,l.useState)(!1),[q,J]=(0,l.useState)(!1);(0,l.useEffect)(()=>{(null==n?void 0:n.user)&&(A(),W())},[null==n?void 0:n.user]),(0,l.useEffect)(()=>{I(100*F.length)},[F]);let A=async()=>{C(!0),P(null);try{let e=await fetch("/api/referral"),t=await e.json();e.ok&&t.code?v(t.code):v(null)}catch(e){P("Failed to fetch referral code.")}finally{C(!1)}},W=async()=>{_(!0),E(null);try{let e=await fetch("/api/referral/referred"),t=await e.json();e.ok&&t.referred?U(t.referred):U([])}catch(e){E("Failed to fetch referred users.")}finally{_(!1)}},X=async()=>{C(!0),P(null);try{let e=await fetch("/api/referral",{method:"POST"}),t=await e.json();e.ok&&t.code?v(t.code):P(t.error||"Failed to generate referral code.")}catch(e){P("Failed to generate referral code.")}finally{C(!1)}},Y=encodeURIComponent("Join me on Predictly and earn bonus credits! Sign up with my referral link:"),z=()=>N?"".concat(window.location.origin,"/auth/signup?ref=").concat(N):"",B=e=>{let t=z();if(!t)return;let s="";"twitter"===e?s="https://twitter.com/intent/tweet?text=".concat(Y,"%20").concat(encodeURIComponent(t)):"facebook"===e?s="https://www.facebook.com/sharer/sharer.php?u=".concat(encodeURIComponent(t)):"whatsapp"===e&&(s="https://wa.me/?text=".concat(Y,"%20").concat(encodeURIComponent(t))),window.open(s,"_blank","noopener,noreferrer")},G=async e=>{e.preventDefault(),j(!0),w(""),f("");let t=await fetch("/api/account/update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:d,email:c,currentPassword:x,newPassword:h})});j(!1),t.ok?(f("Profile updated!"),o(),m(""),b("")):w((await t.json()).error||"Update failed.")};return(0,a.jsx)("main",{className:"min-h-screen bg-black text-white py-8 px-4",children:(0,a.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(null==n?void 0:n.user)&&(0,a.jsx)("section",{className:"mb-6 p-4 rounded-lg bg-gray-800 text-green-200 flex flex-col md:flex-row md:items-center md:justify-between shadow",children:(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"font-bold text-lg",children:["Welcome, ",n.user.username||n.user.name||n.user.email,"!"]}),(0,a.jsxs)("div",{className:"text-sm text-gray-300",children:["Email: ",n.user.email]}),(0,a.jsxs)("div",{className:"text-sm text-gray-300",children:["Pro Status: ",n.user.pro_status?"Pro":"Free"]}),(0,a.jsxs)("div",{className:"text-sm text-gray-300",children:["Credits: ",null!==(s=n.user.credits)&&void 0!==s?s:0]})]})}),(0,a.jsx)("h1",{className:"text-4xl font-extrabold mb-8 text-center",children:"\uD83D\uDC64 Account Dashboard"}),(null==n?void 0:n.user)&&(0,a.jsxs)("form",{onSubmit:G,className:"bg-gray-900 p-6 rounded-lg shadow mb-8",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Edit Profile"}),(0,a.jsx)("label",{className:"block mb-2 text-gray-300",htmlFor:"username",children:"Username"}),(0,a.jsx)("input",{id:"username",type:"text",value:d,onChange:e=>i(e.target.value),className:"w-full mb-4 p-2 rounded bg-gray-800 text-white focus:outline-none focus:ring-2 focus:ring-green-400",required:!0}),(0,a.jsx)("label",{className:"block mb-2 text-gray-300",htmlFor:"email",children:"Email"}),(0,a.jsx)("input",{id:"email",type:"email",value:c,onChange:e=>u(e.target.value),className:"w-full mb-4 p-2 rounded bg-gray-800 text-white focus:outline-none focus:ring-2 focus:ring-green-400",required:!0}),(0,a.jsx)("label",{className:"block mb-2 text-gray-300",htmlFor:"currentPassword",children:"Current Password (required to change email or password)"}),(0,a.jsx)("input",{id:"currentPassword",type:"password",value:x,onChange:e=>m(e.target.value),className:"w-full mb-4 p-2 rounded bg-gray-800 text-white focus:outline-none focus:ring-2 focus:ring-yellow-400"}),(0,a.jsx)("label",{className:"block mb-2 text-gray-300",htmlFor:"newPassword",children:"New Password (leave blank to keep current)"}),(0,a.jsx)("input",{id:"newPassword",type:"password",value:h,onChange:e=>b(e.target.value),className:"w-full mb-4 p-2 rounded bg-gray-800 text-white focus:outline-none focus:ring-2 focus:ring-yellow-400"}),p&&(0,a.jsx)("div",{className:"text-red-400 mb-4 text-sm",children:p}),g&&(0,a.jsx)("div",{className:"text-green-400 mb-4 text-sm",children:g}),(0,a.jsx)("button",{type:"submit",className:"w-full bg-green-500 hover:bg-green-400 text-black font-bold py-2 px-4 rounded-full text-lg shadow transition-all duration-200 focus:outline-none focus:ring-4 focus:ring-green-300 mb-4 disabled:opacity-60",disabled:y,children:y?"Updating...":"Update Profile"})]}),(0,a.jsxs)("section",{className:"mb-8 bg-gray-900 rounded-lg p-6 shadow flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-lg text-gray-400",children:"Total Credits"}),(0,a.jsx)("div",{className:"text-3xl font-bold text-green-400",children:"1,200"})]}),(0,a.jsx)("button",{className:"bg-yellow-400 hover:bg-yellow-300 text-black font-bold py-2 px-6 rounded-full text-lg shadow transition-all duration-200",children:"Withdraw (Crypto)"})]}),(0,a.jsxs)("section",{className:"mb-8 bg-gray-900 rounded-lg p-6 shadow",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Purchase History"}),(0,a.jsxs)("ul",{children:[(0,a.jsxs)("li",{className:"mb-2 flex justify-between bg-gray-800 rounded p-2",children:[(0,a.jsx)("span",{children:"+500 creds"}),(0,a.jsx)("span",{className:"text-gray-400",children:"2024-06-01"})]}),(0,a.jsxs)("li",{className:"mb-2 flex justify-between bg-gray-800 rounded p-2",children:[(0,a.jsx)("span",{children:"+700 creds"}),(0,a.jsx)("span",{className:"text-gray-400",children:"2024-05-20"})]})]})]}),(0,a.jsxs)("section",{className:"mb-8 bg-gradient-to-r from-yellow-500 via-yellow-300 to-yellow-500 rounded-lg p-6 shadow text-black text-center",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"Upgrade to Pro"}),(0,a.jsx)("p",{className:"mb-4",children:"Unlock exclusive contests, bigger prizes, and leaderboard access."}),(0,a.jsx)("button",{className:"bg-black hover:bg-gray-800 text-yellow-300 font-bold py-2 px-8 rounded-full text-lg shadow transition-all duration-200",children:"Upgrade Now"})]}),(0,a.jsxs)("section",{className:"mb-8 bg-gray-900 rounded-lg p-6 shadow",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Referral Codes & Bonuses"}),(0,a.jsx)("div",{className:"flex items-center gap-4 mb-2",children:k?(0,a.jsx)("span",{className:"text-lg",children:"Loading..."}):N?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"bg-gray-800 px-4 py-2 rounded text-green-400 font-mono",children:N}),(0,a.jsx)("button",{onClick:()=>{N&&(navigator.clipboard.writeText(N),L(!0),setTimeout(()=>L(!1),1500))},className:"bg-green-500 hover:bg-green-400 text-black font-bold py-1 px-4 rounded-full text-sm",children:O?"Copied!":"Copy Code"}),(0,a.jsx)("button",{onClick:()=>{if(N){let e="".concat(window.location.origin,"/auth/signup?ref=").concat(N);navigator.clipboard.writeText(e),J(!0),setTimeout(()=>J(!1),1500)}},className:"bg-blue-500 hover:bg-blue-400 text-white font-bold py-1 px-4 rounded-full text-sm",children:q?"Copied!":"Copy Invite Link"}),(0,a.jsx)("button",{onClick:()=>B("twitter"),className:"bg-[#1DA1F2] hover:bg-blue-400 text-white font-bold py-1 px-3 rounded-full text-sm",title:"Share on X",children:"Share on X"})]}):S?null:(0,a.jsx)("button",{className:"bg-blue-500 hover:bg-blue-400 text-white font-bold py-2 px-6 rounded-full text-lg shadow transition-all duration-200 focus:outline-none focus:ring-4 focus:ring-blue-300 disabled:opacity-60",onClick:X,disabled:k,children:"Generate Referral Code"})}),!N&&S&&(0,a.jsx)("div",{className:"text-red-400 mt-2 text-sm",children:S}),(0,a.jsx)("div",{className:"mt-2 text-gray-400 text-sm",children:"Share your code to earn bonus credits!"}),(0,a.jsxs)("div",{className:"mt-2 text-green-300 text-sm",children:["Total bonus credits earned: ",(0,a.jsx)("span",{className:"font-bold",children:R})]})]}),(0,a.jsxs)("section",{className:"mb-8 bg-gray-900 rounded-lg p-6 shadow",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Users You Referred"}),T?(0,a.jsx)("div",{children:"Loading..."}):D?(0,a.jsx)("div",{className:"text-red-400",children:D}):0===F.length?(0,a.jsx)("div",{className:"text-gray-400",children:"You haven't referred any users yet."}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"mb-2 text-green-400 font-semibold",children:["Total referred: ",F.length]}),(0,a.jsx)("ul",{children:F.map(e=>(0,a.jsxs)("li",{className:"mb-2 bg-gray-800 rounded p-2 flex flex-col md:flex-row md:items-center md:justify-between",children:[(0,a.jsx)("span",{className:"font-mono text-yellow-300",children:e.username||e.email}),(0,a.jsxs)("span",{className:"text-gray-400 text-xs ml-2",children:["Joined: ",new Date(e.created_at).toLocaleDateString()]})]},e.id))})]})]}),(0,a.jsxs)("section",{className:"mb-8 bg-gray-900 rounded-lg p-6 shadow",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Support & Contact"}),(0,a.jsx)("p",{className:"mb-2",children:"Need help? Reach out to our support team:"}),(0,a.jsx)("a",{href:"mailto:support@predictly.com",className:"text-green-400 underline",children:"support@predictly.com"})]})]})})}}},function(e){e.O(0,[605,971,117,744],function(){return e(e.s=3280)}),_N_E=e.O()}]);
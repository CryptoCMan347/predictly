(()=>{var e={};e.id=767,e.ids=[767],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},44152:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>a.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>d}),r(40045),r(70128),r(35866);var s=r(23191),i=r(88716),n=r(37922),a=r.n(n),l=r(95231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);r.d(t,o);let d=["",{children:["my-credits",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,40045)),"C:\\Users\\Christian Domingues\\cursor_projects\\Predictly\\src\\app\\my-credits\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,70128)),"C:\\Users\\Christian Domingues\\cursor_projects\\Predictly\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\Christian Domingues\\cursor_projects\\Predictly\\src\\app\\my-credits\\page.tsx"],u="/my-credits/page",x={require:r,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/my-credits/page",pathname:"/my-credits",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},64510:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,12994,23)),Promise.resolve().then(r.t.bind(r,96114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,79671,23)),Promise.resolve().then(r.t.bind(r,41868,23)),Promise.resolve().then(r.t.bind(r,84759,23))},35606:(e,t,r)=>{Promise.resolve().then(r.bind(r,63808)),Promise.resolve().then(r.bind(r,54453))},49060:(e,t,r)=>{Promise.resolve().then(r.bind(r,23141))},23141:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var s=r(10326),i=r(17577),n=r(77109);function a(){let{data:e,status:t}=(0,n.useSession)(),[r,a]=(0,i.useState)(!1),[l,o]=(0,i.useState)(""),[d,c]=(0,i.useState)(!1),[u,x]=(0,i.useState)(""),[m,h]=(0,i.useState)(""),[g,b]=(0,i.useState)([]),[f,p]=(0,i.useState)(!1),[j,y]=(0,i.useState)(""),v=l&&!isNaN(Number(l))?(Number(l)/10).toFixed(2):"0.00",N=async()=>{if(e?.user?.id)return e.user.id;try{let e=await fetch("/api/account"),t=await e.json();if(e.ok&&t.user&&t.user.id)return t.user.id}catch(e){}},P=async()=>{console.log("session.user",e?.user),h("");let t=Number(l);if(!l||isNaN(t)||t<50){h("Minimum purchase is 50 credits.");return}c(!0),x("");try{let e=await N();if(!e){x("Could not determine user ID. Please sign in again."),c(!1);return}let r=await fetch("/api/stripe/checkout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({credits:t,userId:e})}),s=await r.json();r.ok&&s.url?window.location.href=s.url:x(s.error||"Failed to start checkout.")}catch(e){x("Failed to start checkout.")}finally{c(!1)}};return"loading"===t?s.jsx("div",{children:"Loading..."}):e?.user?(0,s.jsxs)("main",{className:"min-h-screen bg-black text-white py-8 px-4 animate-fade-in",children:[(0,s.jsxs)("div",{className:"max-w-md mx-auto bg-gray-900 rounded-lg shadow p-8",children:[s.jsx("h1",{className:"text-3xl font-bold mb-6 text-center",children:"My Credits"}),(0,s.jsxs)("div",{className:"mb-8 text-center",children:[s.jsx("span",{className:"text-lg text-gray-300",children:"Current Balance:"}),s.jsx("span",{className:"text-4xl font-extrabold text-green-400 ml-2",children:e.user.credits??0})]}),s.jsx("button",{onClick:()=>{o(""),h(""),x(""),a(!0)},className:"w-full bg-green-500 hover:bg-green-400 text-black font-bold py-3 px-4 rounded-full text-lg shadow transition-all duration-200 focus:outline-none focus:ring-4 focus:ring-green-300 mb-2",children:"Buy Credits"})]}),r&&s.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-60 z-50",children:(0,s.jsxs)("div",{className:"bg-gray-900 rounded-lg shadow-lg p-8 w-full max-w-sm relative",children:[s.jsx("button",{onClick:()=>{a(!1),h(""),x("")},className:"absolute top-2 right-2 text-gray-400 hover:text-red-400 text-2xl font-bold focus:outline-none","aria-label":"Close",children:"\xd7"}),s.jsx("h2",{className:"text-2xl font-bold mb-4 text-center",children:"Buy Credits"}),s.jsx("label",{htmlFor:"credits",className:"block mb-2 text-gray-300 font-semibold",children:"Number of Credits"}),s.jsx("input",{id:"credits",type:"text",inputMode:"numeric",pattern:"[0-9]*",min:50,value:l,onChange:e=>{let t=e.target.value;""===t?(o(""),h("")):/^\d+$/.test(t)&&(o(t),50>Number(t)?h("Minimum purchase is 50 credits."):h(""))},placeholder:"Enter number of credits",className:`w-full mb-2 p-2 rounded bg-gray-800 text-white focus:outline-none focus:ring-2 focus:ring-green-400 ${m?"border border-red-400":""}`,autoFocus:!0}),(0,s.jsxs)("div",{className:"mb-2 text-gray-400 text-sm",children:["Minimum purchase: ",50," credits"]}),(0,s.jsxs)("div",{className:"mb-4 text-green-300 text-lg",children:["Total: ",(0,s.jsxs)("span",{className:"font-bold",children:["$",v]})]}),s.jsx("button",{onClick:P,disabled:d||!!m,className:"w-full bg-green-500 hover:bg-green-400 text-black font-bold py-2 px-4 rounded-full text-lg shadow transition-all duration-200 focus:outline-none focus:ring-4 focus:ring-green-300 disabled:opacity-60",children:d?"Redirecting to Stripe...":"Proceed to Checkout"}),m?s.jsx("div",{className:"text-red-400 mt-2 text-sm",children:m}):u?s.jsx("div",{className:"text-red-400 mt-2 text-sm",children:u}):null]})}),(0,s.jsxs)("div",{className:"max-w-md mx-auto bg-gray-900 rounded-lg shadow p-8 mt-8",children:[s.jsx("h2",{className:"text-2xl font-bold mb-4 text-center",children:"Transaction History"}),f?s.jsx("div",{children:"Loading..."}):j?s.jsx("div",{className:"text-red-400",children:j}):0===g.length?s.jsx("div",{className:"text-gray-400",children:"No transactions yet."}):s.jsx("ul",{children:g.map(e=>(0,s.jsxs)("li",{className:"mb-3 bg-gray-800 rounded p-3 flex flex-col md:flex-row md:items-center md:justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"font-mono text-green-300",children:["+",e.credits," credits"]}),(0,s.jsxs)("div",{className:"text-gray-400 text-xs",children:["$",e.amount.toFixed(2)," via ",e.paymentType," (",e.status,")"]})]}),s.jsx("div",{className:"text-gray-400 text-xs mt-1 md:mt-0",children:new Date(e.createdAt).toLocaleString()})]},e.id))})]})]}):s.jsx("div",{children:"Please sign in to view your credits."})}},63808:(e,t,r)=>{"use strict";r.d(t,{default:()=>n});var s=r(10326),i=r(77109);function n({children:e}){return s.jsx(i.SessionProvider,{children:e})}r(17577)},54453:(e,t,r)=>{"use strict";r.d(t,{default:()=>d});var s=r(10326),i=r(17577),n=r(90434),a=r(35047),l=r(77109);let o=[{href:"/",label:"Home"},{href:"/dashboard",label:"Dashboard"},{href:"/contest/1",label:"Contests"},{href:"/leaderboard",label:"Leaderboard"},{href:"/account",label:"Account"}],d=()=>{let e=(0,a.usePathname)(),[t,r]=(0,i.useState)(!1),{data:d}=(0,l.useSession)(),c=t=>"/"===t?"/"===e:e.startsWith(t);return s.jsx("nav",{className:"bg-black border-b border-gray-800 py-4 px-6 shadow-lg sticky top-0 z-50",children:(0,s.jsxs)("div",{className:"max-w-6xl mx-auto flex items-center justify-between",children:[s.jsx(n.default,{href:"/",className:"text-2xl font-extrabold text-green-400 tracking-tight hover:text-green-300 transition",children:"Predictly"}),s.jsx("button",{className:"md:hidden text-gray-200 text-3xl focus:outline-none","aria-label":"Toggle menu",onClick:()=>r(e=>!e),children:t?"✖":"☰"}),(0,s.jsxs)("ul",{className:`flex-col md:flex-row md:flex gap-6 items-center absolute md:static top-16 left-0 w-full md:w-auto bg-black md:bg-transparent transition-all duration-300 ${t?"flex":"hidden md:flex"}`,children:[o.map(e=>s.jsx("li",{children:s.jsx(n.default,{href:e.href,className:`text-lg font-semibold transition px-2 py-1 rounded ${c(e.href)?"text-yellow-400 bg-gray-800 shadow":"text-gray-200 hover:text-yellow-400"}`,onClick:()=>r(!1),children:e.label})},e.href)),d?(0,s.jsxs)(s.Fragment,{children:[s.jsx("li",{children:(0,s.jsxs)(n.default,{href:"/my-credits",className:"text-lg text-green-300 font-bold hover:underline px-2",children:["My Credits: ",d.user.credits??0]})}),s.jsx("li",{className:"ml-4",children:s.jsx("div",{className:"w-9 h-9 bg-gray-700 rounded-full flex items-center justify-center text-xl text-green-300 border-2 border-green-500 shadow-inner cursor-pointer",title:d.user?.email||"User Profile",children:d.user?.image?s.jsx("img",{src:d.user.image,alt:"avatar",className:"w-9 h-9 rounded-full"}):s.jsx("span",{role:"img","aria-label":"User",children:"\uD83D\uDC64"})})}),s.jsx("li",{children:s.jsx("button",{onClick:()=>(0,l.signOut)({callbackUrl:"/"}),className:"text-lg text-red-400 font-bold hover:underline ml-2",children:"Log Out"})})]}):(0,s.jsxs)(s.Fragment,{children:[s.jsx("li",{children:s.jsx(n.default,{href:"/auth/signin",className:"text-lg text-green-400 font-bold hover:underline",onClick:()=>r(!1),children:"Sign In"})}),s.jsx("li",{children:s.jsx(n.default,{href:"/auth/signup",className:"text-lg text-yellow-400 font-bold hover:underline",onClick:()=>r(!1),children:"Sign Up"})})]})]})]})})}},70128:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o,metadata:()=>l});var s=r(19510);r(5023);var i=r(68570);let n=(0,i.createProxy)(String.raw`C:\Users\Christian Domingues\cursor_projects\Predictly\src\components\NavBar.tsx#default`),a=(0,i.createProxy)(String.raw`C:\Users\Christian Domingues\cursor_projects\Predictly\src\components\ClientSessionProvider.tsx#default`),l={title:"Predictly - Skill-Based Prediction Platform",description:"Monetize your knowledge through PvP predictions"};function o({children:e}){return s.jsx("html",{lang:"en",children:s.jsx("body",{children:(0,s.jsxs)(a,{children:[s.jsx(n,{}),e]})})})}},40045:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(68570).createProxy)(String.raw`C:\Users\Christian Domingues\cursor_projects\Predictly\src\app\my-credits\page.tsx#default`)},5023:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[276,250],()=>r(44152));module.exports=s})();
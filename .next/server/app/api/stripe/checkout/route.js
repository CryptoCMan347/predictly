"use strict";(()=>{var e={};e.id=457,e.ids=[457],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},61282:e=>{e.exports=require("child_process")},84770:e=>{e.exports=require("crypto")},17702:e=>{e.exports=require("events")},32615:e=>{e.exports=require("http")},35240:e=>{e.exports=require("https")},21764:e=>{e.exports=require("util")},56212:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>m,patchFetch:()=>x,requestAsyncStorage:()=>d,routeModule:()=>n,serverHooks:()=>h,staticGenerationAsyncStorage:()=>l});var s={};r.r(s),r.d(s,{POST:()=>c});var i=r(49303),o=r(88716),p=r(60670),u=r(87070);let a=new(r(31059)).Z(process.env.STRIPE_SECRET_KEY,{apiVersion:"2025-05-28.basil"});async function c(e){try{let{credits:t,userId:r}=await e.json(),s=Number(t);if(console.log({credits:t,creditsNum:s,userId:r}),!s||isNaN(s)||s<50||!r)return u.NextResponse.json({error:"Minimum purchase is 50 credits."},{status:400});let i=s/10*100,o=await a.checkout.sessions.create({payment_method_types:["card"],line_items:[{price_data:{currency:"usd",product_data:{name:`${s} Predictly Credits`,description:"Credits for use on Predictly"},unit_amount:Math.round(i)},quantity:1}],mode:"payment",success_url:"https://predictly-live.vercel.app/payment-success?session_id={CHECKOUT_SESSION_ID}",cancel_url:"https://predictly-live.vercel.app/account",metadata:{userId:r,credits:s}});return u.NextResponse.json({url:o.url})}catch(e){return console.error("Stripe checkout error:",e),u.NextResponse.json({error:"Stripe checkout failed."},{status:500})}}let n=new i.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/stripe/checkout/route",pathname:"/api/stripe/checkout",filename:"route",bundlePath:"app/api/stripe/checkout/route"},resolvedPagePath:"C:\\Users\\Christian Domingues\\cursor_projects\\Predictly\\src\\app\\api\\stripe\\checkout\\route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:d,staticGenerationAsyncStorage:l,serverHooks:h}=n,m="/api/stripe/checkout/route";function x(){return(0,p.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:l})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[276,972,59],()=>r(56212));module.exports=s})();